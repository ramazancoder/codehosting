<?php

ob_start();
define('API_KEY','5079830496:AAHIZN8NR1IX1DsiQTRkVJzcQWw9Z17z4Ug');

$admin = "1940513798";

function bot($method,$datas=[]){
    $url = "https://api.telegram.org/bot".API_KEY."/".$method;
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch,CURLOPT_POSTFIELDS,$datas);
    $res = curl_exec($ch);
    if(curl_error($ch)){
        var_dump(curl_error($ch));
    }else{
        return json_decode($res);
    }
}

$update = json_decode(file_get_contents('php://input'));
$message = $update->message;
$tx = $message->text;
$cid = $message->chat->id;
$mid = $update->message->message_id;
$user = $message->from->username;
$rpl = json_encode([
            'resize_keyboard'=>false,
            'force_reply'=>true,
            'selective'=>true
        ]);
$joy = file_get_contents("$cid/$cid.joy");
$step = file_get_contents("$cid/$cid.step");
$soat = date('H:i', strtotime('4 hour'));
$sana = date('d-M Y',strtotime('+4 hour'));
$data = $update->callback_query->data;
$name = $message->from->first_name;
$uid= $message->from->id;
$nomer = $message->contact->phone_number;
$contact = $message->contact;
$qid = $update->callback_query->id;
$clid = $update->callback_query->user_id;
$name = $message->chat->first_name;
$mid1 = $update->callback_query->message->message_id;
$cid1 = $update->callback_query->message->chat->id;
$type = $update->message->chat->type;
$text= $message->text;
$odam = file_get_contents("azolar.dat");
$adminn = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üë§Userlarga xabar"],['text'=>"üë§Userlarga forward"]],
[['text'=>"üîôOrqaga"]],
]
]);
$tarif = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üìÇFile yuklash"],['text'=>"üë§Kabinet"]],
[['text'=>"üí≥Tariflar"],['text'=>"üîôOrqaga"]],
]
]);
$bosh = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üöÄHosting"],['text'=>"üéÅQiziqarli"]],
[['text'=>"‚ùóÔ∏èYordam"],['text'=>"‚ôªÔ∏èYangilash"]],
[['text'=>"üî•Maker bo'lim"],['text'=>"üéáPhoto bo'im"]],
]]);
$bosh1 = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üöÄHosting"],['text'=>"üéÅQiziqarli"]],
[['text'=>"‚ùóÔ∏èYordam"],['text'=>"‚ôªÔ∏èYangilash"]],
[['text'=>"üî•Maker bo'lim"],['text'=>"üéáPhoto bo'im"]],
[['text'=>"üëÆAdmin panel"]],
]]);
$qiz = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[/*['text'=>"‚õÖÔ∏èOb-havo"],*/['text'=>"üë®‚ÄçüíªDasturchi"],['text'=>"üìÜSana-vaqt"]],
[['text'=>"üî∞Ismlar manosi"],['text'=>"üìäStatistika"]],
[['text'=>"üîéRasm qidirish"],['text'=>"üîôOrqaga"]],
]
]);
$havo = json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üå•Ô∏èToshkent"],['text'=>"üå•Ô∏èAndijon"]],
[['text'=>"üå•Ô∏èBuxoro"],['text'=>"üå•Ô∏èGuliston"]],
[['text'=>"üå•Ô∏èJizzax"],['text'=>"üå•Ô∏èZarafshon"]],
[['text'=>"üå•Ô∏èQarshi"],['text'=>"üå•Ô∏èNavoiy"]],
[['text'=>"üå•Ô∏èNamangan"],['text'=>"üå•Ô∏èNukus"]],
[['text'=>"üå•Ô∏èSamarqand"],['text'=>"üå•Ô∏èTermiz"]],
[['text'=>"üå•Ô∏èUrganch"],['text'=>"üå•Ô∏èFarg'ona"]],
[['text'=>"üå•Ô∏èXiva"],['text'=>"üîôOrqaga"]],
]
]);
if ($tx == "/start") {
    Mkdir($cid);
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"ü§ñBotdan foydalanish uchun ro'yhatdan o'tishingiz kerak!",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üì≤Ro'yhatdan o'tish",'request_contact'=>true]],
    ]
    ])
    ]);
    file_put_contents("$cid/$cid.step", "royhat");
}
if ($contact and $step == "royhat") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚úÖRo'yhatdan omadli o'tdingiz!",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üìùBoshlash"]],
    ]
    ])
    ]);
    file_put_contents("$cid/$cid.step","boshla");
    bot('sendMessage',[
    'chat_id'=>$admin,
    'text'=>"üî∞Botimizda yangi a'zo \n\nüöÄIsmi: $name \nüöÄID: $uid \nüöÄUser: $user \nüöÄNomer: $nomer",
    ]);
}

if($tx == "üìùBoshlash" and $step == "boshla"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üëãSalom xush kelibsiz",
    'reply_markup'=>$bosh,
 ]);   
    file_put_contents("$cid/$cid.step", "start");
}
if($tx == "üìùBoshlash" and $step == "boshla" and $cid == "$admin"){
    bot('sendMessage',[
    'chat_id'=>$admin,
    'text'=>"üëãSalom xush kelibsiz",
    'reply_markup'=>$bosh1,
 ]);   
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "üëÆAdmin panel" and $step == "start") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üëÆAdmin panelga xush kelibsiz!",
    'reply_markup'=>$adminn,
    ]);
    file_put_contents("$cid/$cid.step", "admin");
}
if ($tx == "üîôOrqaga" and $step == "admin") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üè°Bosh menu!",
    'reply_markup'=>$bosh1,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "‚ùóÔ∏èYordam" and $step == "start") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚ôªÔ∏èYordam \n\nü§ñBu bot orqali siz .php kodlaringizni hosting qilishingiz mumkun! \n‚ùóÔ∏èEslatma \nBotdan faqat 1 ta .php kod hosting qilishingiz mumkun agarda 2 ta .php hosting qilsangiz avvalgisi ishlamasligi mumkun!",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
    ]);
    file_put_contents("$cid/$cid.step", "yordam");
}
if ($tx == "üîôOrqaga" and $step == "yordam") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üè°Bosh menu!",
    'reply_markup'=>$bosh,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "üë®‚ÄçüíªDasturchi" and $step == "qiziqarli") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üë®‚ÄçüíªDasturchi \n\nüöÄ@RamazanDeveloper \nüöÄKanal: @RamazanDev \nüéÅHomiy: @Coder_2oo7",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
    ]);
    file_put_contents("$cid/$cid.step", "dasturchi");
}
if ($tx == "üîôOrqaga" and $step == "dasturchi") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "üéÅQiziqarli" and $step == "start") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'limga xush kelibsiz!",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
if ($tx == "üîôOrqaga" and $step == "qiziqarli") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üè°Bosh menu!",
    'reply_markup'=>$bosh,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
/*if ($tx == "‚õÖÔ∏èOb-havo" and $step == "qiziqarli") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èViloyatni tanlang!",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èToshkent" and $step == "havo") {
    $uz = file_get_contents("http://obhavo.uz/tashkent", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "toshkent");
}
if ($tx == "üîôOrqaga" and $step == "toshkent") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èAndijon" and $step == "havo") {
   $uz = file_get_contents("http://obhavo.uz/andijan", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "andijon");
}
if ($tx == "üîôOrqaga" and $step == "andijon") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èBuxoro" and $step == "havo") {
    $uz = file_get_contents("http://obhavo.uz/bukhara", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "buxoro");
}
if ($tx == "üîôOrqaga" and $step == "buxoro") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èGuliston" and $step == "havo") {
    $uz = file_get_contents("http://obhavo.uz/gulistan", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "guliston");
}    
if ($tx == "üîôOrqaga" and $step == "guliston") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èJizzax" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/jizzakh", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "jizzax");
}    
if ($tx == "üîôOrqaga" and $step == "jizzax") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èZarafshon" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/zarafshan", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "zarafshon");
}    
if ($tx == "üîôOrqaga" and $step == "zarafshon") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èQarshi" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/karshi", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "qarshi");
}    
if ($tx == "üîôOrqaga" and $step == "qarshi") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èNavoiy" and $step == "havo"){
$uz = file_get_contents("http://obhavo.uz/navoi", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "navoi");
}    
if ($tx == "üîôOrqaga" and $step == "navoi") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èNamangan" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/namangan", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "namangan");
}    
if ($tx == "üîôOrqaga" and $step == "namangan"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èNukus" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/nukus", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "nukus");
}    
if ($tx == "üîôOrqaga" and $step == "nukus"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èSamarqand" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/samarkand", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "samar");
}    
if ($tx == "üîôOrqaga" and $step == "samar"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èTermiz" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/termez", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "termiz");
}    
if ($tx == "üîôOrqaga" and $step == "termiz"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èUrganch" and $step == "havo") {
    $uz = file_get_contents("http://obhavo.uz/urgench", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "urganch");
}    
if ($tx == "üîôOrqaga" and $step == "urganch"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èFarg'ona" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/ferghana", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "fargona");
}    
if ($tx == "üîôOrqaga" and $step == "fargona"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üå•Ô∏èXiva" and $step == "havo") {
$uz = file_get_contents("http://obhavo.uz/khiva", false, stream_context_create($arrContextOptions));
$ex1=explode("\n",$uz);
$oqshom=str_replace('<p class="forecast">',' ',$ex1[108]);
$oqshom=str_replace('</p>',' ',$oqshom);
$oqshom= trim($oqshom);
$kuns=str_replace('<p class="forecast">',' ',$ex1[103]);
$kuns=str_replace('</p>',' ',$kuns);
$kuns= trim($kuns);
$tong=str_replace('<p class="forecast">',' ',$ex1[98]);
$tong=str_replace('</p>',' ',$tong);
$tong= trim($tong);
$quyosh2=str_replace('<p>',' ',$ex1[87]);
$quyosh2=str_replace('</p>',' ',$quyosh2);
$quyosh2= trim($quyosh2);
$quyosh1=str_replace('<p>',' ',$ex1[86]);
$quyosh1=str_replace('</p>',' ',$quyosh1);
$quyosh1= trim($quyosh1);
$bosim=str_replace('<p>',' ',$ex1[82]);
$bosim=str_replace('</p>',' ',$bosim);
$bosim= trim($bosim);
$shamol=str_replace('<p>',' ',$ex1[81]);
$shamol=str_replace('</p>',' ',$shamol);
$shamol= trim($shamol);
$harorat=str_replace('<div class="current-forecast-desc">',' ',$ex1[76]);
$harorat=str_replace('</div>',' ',$harorat);
$harorat= trim($harorat);
$tun=str_replace('<span>',' ',$ex1[73]);
$tun=str_replace('</span>',' ',$tun);
$tun= trim($tun);
$kun=str_replace('<span><strong>',' ',$ex1[72]);
$kun=str_replace('</strong></span>',' ',$kun);
$kun= trim($kun);
$bugun=str_replace('<div class="current-day">',' ',$ex1[66]);
$bugun=str_replace('</div>',' ',$bugun);
$bugun= trim($bugun);
$namlik=str_replace('<p>',' ',$ex1[80]);
$namlik=str_replace('</p>',' ',$namlik);
$namlik= trim($namlik);
bot('sendMessage',[
'chat_id'=>$cid,
'message_id'=>$mid,
'text'=>"<b>$bugun
‚õÖÔ∏è $kun...$tun, <b>$harorat</b>

üåÜ Tong: $tong
üåá Kun: $kuns 
üèô Oqshom: $oqshom

$namlik
$shamol
$bosim

$quyosh1
$quyosh2

üîî @codehostingbot</b>",
'parse_mode'=>'html',
'reply_markup'=>json_encode([
'resize_keyboard'=>true,
'keyboard'=>[
[['text'=>"üîôOrqaga"]],
]]),
]);
file_put_contents("$cid/$cid.step", "xiva");
}    
if ($tx == "üîôOrqaga" and $step == "xiva"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚õÖÔ∏èOb-havo bo'limi...",
    'reply_markup'=>$havo,
    ]);
    file_put_contents("$cid/$cid.step", "havo");
}
if ($tx == "üîôOrqaga" and $step == "havo") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
*/
if($tx == "üìÜSana-vaqt" and $step == "qiziqarli"){
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üìÜ $sana $soat",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
    ]);
    file_put_contents("$cid/$cid.step", "sana");
}
if ($tx == "üîôOrqaga" and $step == "sana") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
if($tx=="‚ôªÔ∏èYangilash" and $step == "start"){
bot('sendmessage',[
 'chat_id'=>$cid,
 'text'=>"‚òáYangilanmoqda!‚ö°",
 'parse_mode'=>"markdown"
 ]);
 sleep(0.3);
bot('editMessageText',[
 'chat_id'=>$cid,
 'text'=>'üîÜüîÖüîÖüîÖüîÖüîÖüîÖüîÖüîÖ0%',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid +1,
 'text'=>'‚ñ™Ô∏è',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÜüîÖüîÖüîÖüîÖüîÖüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÜüîÖüîÖüîÖüîÖüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÖüîÜüîÖüîÖüîÖüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÖüîÖüîÜüîÖüîÖüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÖüîÖüîÖüîÜüîÖüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÖüîÖüîÖüîÖüîÜüîÖüîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖüîÖüîÖüîÖüîÖüîÖüîÖüîÜüîÖ',
]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid +1,
 'text'=>'üîÖüîÖüîÖüîÖüîÖüîÖüîÖüîÖüîÜ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'Biroz kuting... ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÜ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÜ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÖ',
 ]);
 sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üîÜ',
]);
sleep(0.5);
bot('editMessageText',[
 'chat_id'=>$cid,
 'message_id'=>$mid + 1,
 'text'=>'üí´',
]);
  bot('deletemessage',[
    'chat_id'=>$cid,
    'message_id'=>$mid + 1,
  ]);
 sleep(0.5);
    bot('sendmessage', [
      'chat_id' =>$cid,
       'text' => "*üåê Sizning Barcha Ma'lumotlaringiz üåù Yangilandi!!!‚úÖ*",
       'parse_mode'=>'markdown',  
       'reply_markup'=>$bosh, 
]);
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "üéáPhoto bo'im" and $step == "start") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"‚öíBu bo'lim hali qo'shilmagan bizdan uzoqlashmang!",
    'reply_markup'=>$bosh,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
if($tx == "üî∞Ismlar manosi" and $step == "qiziqarli"){
  bot('sendMessage',[
  'chat_id'=>$cid,
  'message_id'=>$mid,
  'text'=>"Ism yuboring‚ôªÔ∏è!",
  'reply_markup'=>json_encode([
  'remove_keyboard'=>true,
  ]),
]);
  file_put_contents("$cid/$cid.step", "manosi");
    }
    if($tx and $step == "manosi"){
$ism = file_get_contents("https://ismlar.com/search/$tx");
  $exp = explode('<p class="text-size-5">',$ism);
  $expl = explode('<div class="col-12 col-md-4 text-md-right">',$exp[1]);
  $im = str_replace($expl[1],' ',$exp[1]);
  $ims = str_replace('</p>',' ',$im);
  $isms = str_replace('</div>',' ',$ims);
  $ismn = str_replace('<div class="col-12 col-md-4 text-md-right">',' ',$isms);
  $ismk = str_replace('&#039;','`',$ismn);
  $ismm = trim("$ismk");
  bot('sendmessage',[
    'chat_id'=>$cid,
    'reply_to_message_id'=>$mid,
    'text'=>"<b>üìö ISMLAR MA'NOSI üìö

üîç $tx

üìë Manosi:</b> <i>$ismm</i>!
ü§ñ Botimiz @codehostingbot",
    'parse_mode'=>'html',
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
  ]);
  file_put_contents("$cid/$cid.step", "mano");
  }
if ($tx == "üîôOrqaga" and $step == "mano") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
if($tx == "üìäStatistika"){
$baza = file_get_contents("azolar.dat");
$obsh = substr_count($baza,"\n");
$gruppa = substr_count($baza,"-");
$lichka = $obsh - $gruppa;

     bot('sendMessage',[
     'chat_id'=>$cid,
     'text'=>"*Bot foydalanuvchilari: $obsh ta*\n\n".date("Y-m-d H:i:s", strtotime('4 hour'))."",
     'parse_mode'=>'markdown',
     'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
  ]);
  file_put_contents("$cid/$cid.step", "stat");
  }
if ($tx == "üîôOrqaga" and $step == "stat") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
if($tx=="üîéRasm qidirish"){
    bot('sendmessage',[
    'chat_id'=>$cid,
    'text'=>"Qanday rasm izlayabsiz!",
    'reply_markup'=>json_encode([
    'remove_keyboard'=>true,
    ]),
    ]);
    file_put_contents("$cid/$cid.step", "rasmizla");
    }
if($tx and $step == "rasmizla"){
bot('sendmessage',[
'chat_id'=>$cid,
'text'=>"*üîç Izlanmoqda...*",
    'parse_mode'=>'markdown',
]);
sleep(1);
bot('sendphoto',[
'chat_id'=>$cid,
'photo'=>"https://yandex.uz/images/touch/search/?text=$tx",
'caption'=>"‚úÖRasm topildi!
@codehostingbot",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
  ]);
  file_put_contents("$cid/$cid.step", "rasmtop");
  }
if ($tx == "üîôOrqaga" and $step == "rasmtop") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üéÅQiziqarli bo'lim...",
    'reply_markup'=>$qiz,
    ]);
    file_put_contents("$cid/$cid.step", "qiziqarli");
}
if ($tx == "üî•Maker bo'lim" and $step == "start") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üî•Tez kunda!",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
  ]);
  file_put_contents("$cid/$cid.step", "maker");
  }
if ($tx == "üîôOrqaga" and $step == "maker") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üè°Bosh menu!",
    'reply_markup'=>$bosh,
    ]);
    file_put_contents("$cid/$cid.step", "start");
}
if ($tx == "üë§Userlarga xabar" and $step == "admin") {
    bot('sendMessage',[ 
    'chat_id'=>$admin,
    'text'=>"üë§Menga xabar yuboring",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
    ]),
    ]);
    file_put_contents("$cid/$cid.step", "usergaxabar");
}
if ($tx and $step == "usergaxabar") {
$lich = file_get_contents("azolar.dat");
  $lichka = explode("\n",$lich);
  foreach($lichka as $users){}
  bot('sendMessage', [
'chat_id'=>$users,
'text'=>$tx,
]);
file_put_contents("$cid/$cid.step", "xabarr");
}
if ($okuser and $step == "xabarr") {
    bot('sendMessage',[
    'chat_id'=>$admin,
    'text'=>"‚úÖXabaringiz barchaga yetkazildi!",
    'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
    ]),
    ]);
    file_put_contents("$cid/$cid.step", "usergaxabar");
}
if ($tx == "üîôOrqaga" and  $step == "usergaxabar") {
    bot('sendMessage',[
    'chat_id'=>$cid,
    'text'=>"üîôOrqaga qayttingiz!",
    'reply_markup'=>$adminn,
    ]);
    file_put_contents("$cid/$cid.step", "admin");
}
if($tx == "üöÄHosting"){
bot('sendMessage',[
'chat_id'=>$cid,
'text'=>"*üì≤Bot faylini jonating misol Fayl nomi.php bolsin*!!!",
'parse_mode'=>'markdown',
'reply_markup'=>json_encode([
    'resize_keyboard'=>true,
    'keyboard'=>[
    [['text'=>"üîôOrqaga"]],
    ]
]),
]);

file_put_contents("$cid/$cid.step", "hosting");
$baza = file_get_contents("azolar.dat");
if(mb_stripos($baza, $cid) !== false){
}}
$doc=$message->document;
$doc_id=$doc->file_id;
if(isset($message->document)){
$url = json_decode(file_get_contents('https://api.telegram.org/bot'.API_KEY.'/getFile?file_id='.$doc_id),true);
$path=$url['result']['file_path'];
$file = 'https://api.telegram.org/file/bot'.API_KEY.'/'.$path;
$type = strtolower(strrchr($file,'.')); 
$type=str_replace('.','',$type);
$okey = file_put_contents("$cid/$cid.code.$type",file_get_contents($file));
if($okey){
bot('sendMessage',[
'chat_id'=>$cid,
'text'=>" *Fayl yuklab olindi endi botni tokenini kiriting namuna\n /token\nbotni_tokeni*  ",
'parse_mode'=>markdown,
]);
}else{
bot('sendMessage',[
'chat_id'=>$cid,
'text'=>"Xatolik #1. Iltimos shu xabarni @RamazanDeveloper ga yuboring!",
'parse_mode'=>markdown,
]);
}
}

if(isset($message->photo) and $joy){
$url = json_decode(file_get_contents('https://api.telegram.org/bot'.API_KEY.'/getFile?file_id='.$photo_id),true);
$path=$url['result']['file_path'];
$file = 'https://api.telegram.org/file/bot'.API_KEY.'/'.$path;
$okey = file_put_contents("$cid/$cid.pic.png",file_get_contents($file));
$type = strtolower(strrchr($file,'.')); 
$type=str_replace('.','',$type);
}

if((mb_stripos($tx,"/token")!==false)){
    $pieces = explode("\n",$tx);
    $s=$pieces[1];
   bot('sendMessage',[
     'chat_id'=>$cid,
     'text'=>"*Botingiz ulandi Tekshiring!!!Agarda ishlamasa kodingizda hato bor yaxshilab tekshirib qaytadan yuboring‚Üí‚òÖ*",
     'parse_mode'=>'markdown',
     'reply_markup'=> $button,
     ]);
     file_get_contents("https://api.telegram.org/bot$s/setwebhook?url=https://u4428.xvest2.ru/codehostingbot/$cid/$cid.code.php");
}
